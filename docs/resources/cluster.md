---
page_title: "f5xc_cluster Resource - terraform-provider-f5xc"
subcategory: "Load Balancing"
description: |-
  Manages cluster will create the object in the storage backend for namespace metadata.namespace in F5 Distributed Cloud.
---

# f5xc_cluster (Resource)

Manages cluster will create the object in the storage backend for namespace metadata.namespace in F5 Distributed Cloud.

~> **Note** For more information about this resource, please refer to the [F5 XC API Documentation](https://docs.cloud.f5.com/docs/api/).

## Example Usage

```terraform
# Cluster Resource Example
# Manages cluster will create the object in the storage backend for namespace metadata.namespace in F5 Distributed Cloud.

# Basic Cluster configuration
resource "f5xc_cluster" "example" {
  name      = "example-cluster"
  namespace = "system"

  labels = {
    environment = "production"
    managed_by  = "terraform"
  }

  annotations = {
    "owner" = "platform-team"
  }

  # Resource-specific configuration
  # [OneOf: auto_http_config, http1_config, http2_options] Em...
  auto_http_config {
    # Configure auto_http_config settings
  }
  # Circuit Breaker. CircuitBreaker provides a mechanism for ...
  circuit_breaker {
    # Configure circuit_breaker settings
  }
  # Default Subset. List of key-value pairs that define defau...
  default_subset {
    # Configure default_subset settings
  }
}
```

<!-- schema generated by tfplugindocs -->
## Argument Reference

### Metadata Argument Reference

`name` - (Required) Name of the Cluster. Must be unique within the namespace (`String`).

`namespace` - (Required) Namespace where the Cluster will be created (`String`).

`annotations` - (Optional) Annotations to apply to this resource (`Map`).

`labels` - (Optional) Labels to apply to this resource (`Map`).

### Spec Argument Reference

> **Note:** One of the arguments from this list "auto_http_config, http1_config, http2_options" must be set.

`auto_http_config` - (Optional) Empty. This can be used for messages where no values are needed. See [Auto HTTP Config](#auto-http-config) below for details.

`http1_config` - (Optional) HTTP/1.1 Protocol Options. HTTP/1.1 Protocol options for upstream connections. See [Http1 Config](#http1-config) below for details.

`http2_options` - (Optional) Http2 Protocol Options. Http2 Protocol options for upstream connections. See [Http2 Options](#http2-options) below for details.

`circuit_breaker` - (Optional) Circuit Breaker. CircuitBreaker provides a mechanism for watching failures in upstream connections or requests and if the failures reach a certain threshold, automatically fail subsequent requests which allows to apply back pressure on downstream quickly. See [Circuit Breaker](#circuit-breaker) below for details.

`connection_timeout` - (Optional) Connection Timeout. The timeout for new network connections to endpoints in the cluster. This is specified in milliseconds. The default value is 2 seconds (`Number`).

`default_subset` - (Optional) Default Subset. List of key-value pairs that define default subset. This subset can be referred in fallback_policy which gets used when route specifies no metadata or no subset matching the metadata exists. See [Default Subset](#default-subset) below for details.

> **Note:** One of the arguments from this list "disable_proxy_protocol, proxy_protocol_v1, proxy_protocol_v2" must be set.

`disable_proxy_protocol` - (Optional) Empty. This can be used for messages where no values are needed. See [Disable Proxy Protocol](#disable-proxy-protocol) below for details.

`proxy_protocol_v1` - (Optional) Empty. This can be used for messages where no values are needed. See [Proxy Protocol V1](#proxy-protocol-v1) below for details.

`proxy_protocol_v2` - (Optional) Empty. This can be used for messages where no values are needed. See [Proxy Protocol V2](#proxy-protocol-v2) below for details.

`endpoint_selection` - (Optional) Endpoint Selection Policy. Policy for selection of endpoints from local site/remote site/both Consider both remote and local endpoints for load balancing LOCAL_ONLY: Consider only local endpoints for load balancing Enable this policy to load balance ONLY among locally discovered endpoints Prefer the local endpoints for load balancing. If local endpoints are not present remote endpoints will be considered. Possible values are `DISTRIBUTED`, `LOCAL_ONLY`, `LOCAL_PREFERRED`. Defaults to `DISTRIBUTED` (`String`).

`endpoint_subsets` - (Optional) Endpoint Subsets. Cluster may be configured to divide its endpoints into subsets based on metadata attached to the endpoints. Routes may then specify the metadata that a endpoint must match in order to be selected by the load balancer. endpoint_subsets is list of subsets for this cluster. Each entry in this list has definition for a subset (which is collection of keys) During routing, the routeâ€™s metadata match configuration is used to find a specific subset. If there is a subset with the e.. See [Endpoint Subsets](#endpoint-subsets) below for details.

`endpoints` - (Optional) Endpoints. List of references to all endpoint objects that belong to this cluster. See [Endpoints](#endpoints) below for details.

`fallback_policy` - (Optional) Subset Fallback Policy. Enumeration for SubsetFallbackPolicy if subset match is not found. The request fails as if the cluster had no endpoint matching the subset policy Any cluster endpoint may be selected if the cluster had no endpoint matching the subset policy Load balancing is done over endpoints matching default_subset if the cluster had no endpoint matching the subset policy. Possible values are `NO_FALLBACK`, `ANY_ENDPOINT`, `DEFAULT_SUBSET`. Defaults to `NO_FALLBACK` (`String`).

`health_checks` - (Optional) Health Checks. List of references to healthcheck object for this cluster. See [Health Checks](#health-checks) below for details.

`http_idle_timeout` - (Optional) HTTP Idle Timeout. The idle timeout for upstream connection pool connections. The idle timeout is defined as the period in which there are no active requests. When the idle timeout is reached the connection will be closed. Note that request based timeouts mean that HTTP/2 PINGs will not keep the connection alive. This is specified in milliseconds. The default value is 5 minutes (`Number`).

`loadbalancer_algorithm` - (Optional) Load Balancer Algorithm. Different load balancing algorithms supported When a connection to a endpoint in an upstream cluster is required, the load balancer uses loadbalancer_algorithm to determine which host is selected. - ROUND_ROBIN: ROUND_ROBIN Policy in which each healthy/available upstream endpoint is selected in round robin order. - LEAST_REQUEST: LEAST_REQUEST Policy in which loadbalancer picks the upstream endpoint which has the fewest active requests - RING_HASH: RING_HASH Policy im... Possible values are `ROUND_ROBIN`, `LEAST_REQUEST`, `RING_HASH`, `RANDOM`, `LB_OVERRIDE`. Defaults to `ROUND_ROBIN` (`String`).

> **Note:** One of the arguments from this list "no_panic_threshold, panic_threshold" must be set.

`no_panic_threshold` - (Optional) Empty. This can be used for messages where no values are needed. See [No Panic Threshold](#no-panic-threshold) below for details.

`panic_threshold` - (Optional) Panic threshold. Configure a threshold (percentage of unhealthy endpoints) below which all endpoints will be considered for loadbalancing ignoring its health status (`Number`).

`outlier_detection` - (Optional) Outlier Detection. Outlier detection and ejection is the process of dynamically determining whether some number of hosts in an upstream cluster are performing unlike the others and removing them from the healthy load balancing set. Outlier detection is a form of passive health checking. Algorithm 1. A endpoint is determined to be an outlier (based on configured number of consecutive_5xx or consecutive_gateway_failures) . 2. If no endpoints have been ejected, loadbalancer will eject the host i.. See [Outlier Detection](#outlier-detection) below for details.

`timeouts` - (Optional) See [Timeouts](#timeouts) below for details.

`tls_parameters` - (Optional) Upstream TLS Parameters. TLS configuration for upstream connections. See [TLS Parameters](#tls-parameters) below for details.

`upstream_conn_pool_reuse_type` - (Optional) Select upstream connection pool reuse state. Select upstream connection pool reuse state for every downstream connection. This configuration choice is for HTTP(S) LB only. See [Upstream Conn Pool Reuse Type](#upstream-conn-pool-reuse-type) below for details.

### Attributes Reference

In addition to all arguments above, the following attributes are exported:

`id` - (Optional) Unique identifier for the resource (`String`).

---

<a id="nestedblock--auto_http_config"></a>

<a id="nestedblock--circuit_breaker"></a>

<a id="nestedblock--default_subset"></a>

<a id="nestedblock--disable_proxy_protocol"></a>

<a id="nestedblock--endpoint_subsets"></a>

<a id="nestedblock--endpoints"></a>

<a id="nestedblock--health_checks"></a>

<a id="nestedblock--http1_config"></a>

<a id="nestedblock--http1_config--header_transformation"></a>

<a id="nestedblock--http1_config--header_transformation--default_header_transformation"></a>

<a id="nestedblock--http1_config--header_transformation--legacy_header_transformation"></a>

<a id="nestedblock--http1_config--header_transformation--preserve_case_header_transformation"></a>

<a id="nestedblock--http1_config--header_transformation--proper_case_header_transformation"></a>

<a id="nestedblock--http2_options"></a>

<a id="nestedblock--no_panic_threshold"></a>

<a id="nestedblock--outlier_detection"></a>

<a id="nestedblock--proxy_protocol_v1"></a>

<a id="nestedblock--proxy_protocol_v2"></a>

<a id="nestedblock--timeouts"></a>

<a id="nestedblock--tls_parameters"></a>

<a id="nestedblock--tls_parameters--cert_params"></a>

<a id="nestedblock--tls_parameters--cert_params--certificates"></a>

<a id="nestedblock--tls_parameters--cert_params--validation_params"></a>

<a id="nestedblock--tls_parameters--cert_params--validation_params--trusted_ca"></a>

<a id="nestedblock--tls_parameters--common_params"></a>

<a id="nestedblock--tls_parameters--common_params--tls_certificates"></a>

<a id="nestedblock--tls_parameters--common_params--tls_certificates--custom_hash_algorithms"></a>

<a id="nestedblock--tls_parameters--common_params--tls_certificates--disable_ocsp_stapling"></a>

<a id="nestedblock--tls_parameters--common_params--tls_certificates--private_key"></a>

<a id="nestedblock--tls_parameters--common_params--tls_certificates--use_system_defaults"></a>

<a id="nestedblock--tls_parameters--common_params--validation_params"></a>

<a id="nestedblock--tls_parameters--common_params--validation_params--trusted_ca"></a>

<a id="nestedblock--tls_parameters--default_session_key_caching"></a>

<a id="nestedblock--tls_parameters--disable_session_key_caching"></a>

<a id="nestedblock--tls_parameters--disable_sni"></a>

<a id="nestedblock--tls_parameters--use_host_header_as_sni"></a>

<a id="nestedblock--upstream_conn_pool_reuse_type"></a>

<a id="nestedblock--upstream_conn_pool_reuse_type--disable_conn_pool_reuse"></a>

<a id="nestedblock--upstream_conn_pool_reuse_type--enable_conn_pool_reuse"></a>

## Import

Import is supported using the following syntax:

```shell
# Import using namespace/name format
terraform import f5xc_cluster.example system/example
```
