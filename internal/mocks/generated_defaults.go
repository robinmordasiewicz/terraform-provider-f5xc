// Code generated by tools/generate-mock-fixtures.go. DO NOT EDIT.
// Generated at: 2025-12-02T09:02:20Z
// Source: tools/api-defaults.json

// Copyright (c) F5XC Community
// SPDX-License-Identifier: MPL-2.0

package mocks

import "encoding/json"

// unmarshalJSON is a helper to convert JSON strings to Go values
func unmarshalJSON(jsonStr string) interface{} {
	var result interface{}
	if err := json.Unmarshal([]byte(jsonStr), &result); err != nil {
		return nil
	}
	return result
}

// ApplyDiscoveredDefaults applies API-discovered default values to a spec map
// based on the resource type. These defaults were discovered by comparing
// minimal API requests with their responses.
//
// This function is called by the mock server's buildResponse method to ensure
// mock responses match real F5 XC API behavior.
func ApplyDiscoveredDefaults(spec map[string]interface{}, resourceType string) {
	switch resourceType {
	case "healthchecks", "healthcheck":
		applyHealthcheckDefaults(spec)
	case "ip_prefix_sets", "ip_prefix_set":
		applyIpPrefixSetDefaults(spec)
	case "policers", "policer":
		applyPolicerDefaults(spec)
	}
}


// applyHealthcheckDefaults applies discovered defaults for healthcheck resources
func applyHealthcheckDefaults(spec map[string]interface{}) {
	// API default: http_health_check.headers = {}
	if http_health_check, ok := spec["http_health_check"].(map[string]interface{}); ok {
		if _, exists := http_health_check["headers"]; !exists {
			http_health_check["headers"] = map[string]interface{}{}
		}
	}
	// API default: http_health_check.use_http2 = false
	if http_health_check, ok := spec["http_health_check"].(map[string]interface{}); ok {
		if _, exists := http_health_check["use_http2"]; !exists {
			http_health_check["use_http2"] = false
		}
	}
	// API default: jitter = 0
	if _, exists := spec["jitter"]; !exists {
		spec["jitter"] = 0
	}
	// API default: jitter_percent = 0
	if _, exists := spec["jitter_percent"]; !exists {
		spec["jitter_percent"] = 0
	}
}


// applyIpPrefixSetDefaults applies discovered defaults for ip_prefix_set resources
func applyIpPrefixSetDefaults(spec map[string]interface{}) {
	// API default: ipv4_prefixes = [1 items]
	if _, exists := spec["ipv4_prefixes"]; !exists {
		spec["ipv4_prefixes"] = unmarshalJSON("[{\"description\":\"\",\"ipv4_prefix\":\"10.0.0.0/8\"}]")
	}
}


// applyPolicerDefaults applies discovered defaults for policer resources
func applyPolicerDefaults(spec map[string]interface{}) {
	// API default: policer_mode = "POLICER_MODE_NOT_SHARED"
	if _, exists := spec["policer_mode"]; !exists {
		spec["policer_mode"] = "POLICER_MODE_NOT_SHARED"
	}
	// API default: policer_type = "POLICER_SINGLE_RATE_TWO_COLOR"
	if _, exists := spec["policer_type"]; !exists {
		spec["policer_type"] = "POLICER_SINGLE_RATE_TWO_COLOR"
	}
}

// GetResourcesWithDefaults returns a list of resource types that have discovered defaults
func GetResourcesWithDefaults() []string {
	return []string{
		"healthcheck",
		"ip_prefix_set",
		"policer",
	}
}

// HasDiscoveredDefaults returns true if the resource type has discovered defaults
func HasDiscoveredDefaults(resourceType string) bool {
	switch resourceType {
	case "healthchecks", "healthcheck":
		return true
	case "ip_prefix_sets", "ip_prefix_set":
		return true
	case "policers", "policer":
		return true
	}
	return false
}
