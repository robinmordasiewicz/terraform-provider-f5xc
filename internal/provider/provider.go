// Code generated by generate-all-schemas.go. DO NOT EDIT.
// Source: F5 XC OpenAPI specification

package provider

import (
	"context"
	"os"

	"github.com/hashicorp/terraform-plugin-framework/datasource"
	"github.com/hashicorp/terraform-plugin-framework/path"
	"github.com/hashicorp/terraform-plugin-framework/provider"
	"github.com/hashicorp/terraform-plugin-framework/provider/schema"
	"github.com/hashicorp/terraform-plugin-framework/resource"
	"github.com/hashicorp/terraform-plugin-framework/types"
	"github.com/hashicorp/terraform-plugin-log/tflog"

	"github.com/f5xc/terraform-provider-f5xc/internal/client"
)

// Ensure F5XCProvider satisfies various provider interfaces.
var _ provider.Provider = &F5XCProvider{}

// F5XCProvider defines the provider implementation.
type F5XCProvider struct {
	// version is set to the provider version on release, "dev" when the
	// provider is built and ran locally, and "test" when running acceptance
	// testing.
	version string
}

// F5XCProviderModel describes the provider data model.
type F5XCProviderModel struct {
	APIToken types.String `tfsdk:"api_token"`
	APIURL   types.String `tfsdk:"api_url"`
}

func (p *F5XCProvider) Metadata(ctx context.Context, req provider.MetadataRequest, resp *provider.MetadataResponse) {
	resp.TypeName = "f5xc"
	resp.Version = p.version
}

func (p *F5XCProvider) Schema(ctx context.Context, req provider.SchemaRequest, resp *provider.SchemaResponse) {
	resp.Schema = schema.Schema{
		MarkdownDescription: "Terraform provider for F5 Distributed Cloud (F5XC) enabling infrastructure as code " +
			"for load balancers, security policies, sites, and networking. Community-maintained provider " +
			"built from public F5 API documentation.",
		Attributes: map[string]schema.Attribute{
			"api_token": schema.StringAttribute{
				MarkdownDescription: "F5 Distributed Cloud API Token. Can also be set via F5XC_API_TOKEN environment variable.",
				Optional:            true,
				Sensitive:           true,
			},
			"api_url": schema.StringAttribute{
				MarkdownDescription: "F5 Distributed Cloud API URL. Defaults to https://console.ves.volterra.io/api. " +
					"Can also be set via F5XC_API_URL environment variable.",
				Optional: true,
			},
		},
	}
}

func (p *F5XCProvider) Configure(ctx context.Context, req provider.ConfigureRequest, resp *provider.ConfigureResponse) {
	tflog.Info(ctx, "Configuring F5XC client")

	var config F5XCProviderModel

	resp.Diagnostics.Append(req.Config.Get(ctx, &config)...)

	if resp.Diagnostics.HasError() {
		return
	}

	// Check for environment variables if not set in configuration
	apiToken := os.Getenv("F5XC_API_TOKEN")
	apiURL := os.Getenv("F5XC_API_URL")

	// Configuration values override environment variables
	if !config.APIToken.IsNull() {
		apiToken = config.APIToken.ValueString()
	}

	if !config.APIURL.IsNull() {
		apiURL = config.APIURL.ValueString()
	}

	// Set default API URL if not provided
	if apiURL == "" {
		apiURL = "https://console.ves.volterra.io/api"
	}

	// Validate that API token is provided
	if apiToken == "" {
		resp.Diagnostics.AddAttributeError(
			path.Root("api_token"),
			"Missing F5XC API Token",
			"The provider cannot create the F5XC API client as there is a missing or empty value for the F5XC API token. "+
				"Set the api_token value in the configuration or use the F5XC_API_TOKEN environment variable. "+
				"If either is already set, ensure the value is not empty.",
		)
		return
	}

	// Create the F5XC client
	c := client.NewClient(apiURL, apiToken)

	// Make the client available during DataSource and Resource type Configure methods
	resp.DataSourceData = c
	resp.ResourceData = c

	tflog.Info(ctx, "Configured F5XC client", map[string]any{"success": true, "api_url": apiURL})
}

func (p *F5XCProvider) Resources(ctx context.Context) []func() resource.Resource {
	return []func() resource.Resource{
		NewAPICrawlerResource,
		NewAPICredentialResource,
		NewAPIDefinitionResource,
		NewAPIDiscoveryResource,
		NewAPITestingResource,
		NewAPMResource,
		NewAWSTGWSiteResource,
		NewAWSVPCSiteResource,
		NewAddonSubscriptionResource,
		NewAddressAllocatorResource,
		NewAdvertisePolicyResource,
		NewAlertPolicyResource,
		NewAlertReceiverResource,
		NewAllowedTenantResource,
		NewAppAPIGroupResource,
		NewAppFirewallResource,
		NewAppSettingResource,
		NewAppTypeResource,
		NewAuthenticationResource,
		NewAzureVNETSiteResource,
		NewBGPAsnSetResource,
		NewBGPResource,
		NewBGPRoutingPolicyResource,
		NewBigIPIruleResource,
		NewBotDefenseAppInfrastructureResource,
		NewCDNCacheRuleResource,
		NewCDNLoadBalancerResource,
		NewCRLResource,
		NewCertificateChainResource,
		NewCertificateResource,
		NewChildTenantManagerResource,
		NewChildTenantResource,
		NewCloudConnectResource,
		NewCloudCredentialsResource,
		NewCloudElasticIPResource,
		NewCloudLinkResource,
		NewClusterResource,
		NewCminstanceResource,
		NewCodeBaseIntegrationResource,
		NewContactResource,
		NewContainerRegistryResource,
		NewCustomerSupportResource,
		NewDNSComplianceChecksResource,
		NewDNSDomainResource,
		NewDNSLbHealthCheckResource,
		NewDNSLbPoolResource,
		NewDNSLoadBalancerResource,
		NewDNSZoneResource,
		NewDataGroupResource,
		NewDataTypeResource,
		NewDcClusterGroupResource,
		NewDiscoveryResource,
		NewEndpointResource,
		NewEnhancedFirewallPolicyResource,
		NewExternalConnectorResource,
		NewFastACLResource,
		NewFastACLRuleResource,
		NewFilterSetResource,
		NewFleetResource,
		NewForwardProxyPolicyResource,
		NewForwardingClassResource,
		NewGCPVPCSiteResource,
		NewGeoLocationSetResource,
		NewGlobalLogReceiverResource,
		NewHTTPLoadBalancerResource,
		NewHealthcheckResource,
		NewIKEPhase1ProfileResource,
		NewIKEPhase2ProfileResource,
		NewIPPrefixSetResource,
		NewIke1Resource,
		NewIke2Resource,
		NewInfraprotectAsnPrefixResource,
		NewInfraprotectAsnResource,
		NewInfraprotectDenyListRuleResource,
		NewInfraprotectFirewallRuleGroupResource,
		NewInfraprotectFirewallRuleResource,
		NewInfraprotectInternetPrefixAdvertisementResource,
		NewInfraprotectTunnelResource,
		NewIruleResource,
		NewK8SClusterResource,
		NewK8SClusterRoleBindingResource,
		NewK8SClusterRoleResource,
		NewK8SPodSecurityAdmissionResource,
		NewK8SPodSecurityPolicyResource,
		NewLogReceiverResource,
		NewMaliciousUserMitigationResource,
		NewManagedTenantResource,
		NewNFVServiceResource,
		NewNamespaceResource,
		NewNatPolicyResource,
		NewNetworkConnectorResource,
		NewNetworkFirewallResource,
		NewNetworkInterfaceResource,
		NewNetworkPolicyResource,
		NewNetworkPolicyRuleResource,
		NewNetworkPolicyViewResource,
		NewOidcProviderResource,
		NewOriginPoolResource,
		NewPolicerResource,
		NewPolicyBasedRoutingResource,
		NewProtocolInspectionResource,
		NewProtocolPolicerResource,
		NewProxyResource,
		NewQuotaResource,
		NewRateLimiterPolicyResource,
		NewRateLimiterResource,
		NewRegistrationResource,
		NewReportConfigResource,
		NewRoleResource,
		NewRouteResource,
		NewSecretManagementAccessResource,
		NewSecretPolicyResource,
		NewSecretPolicyRuleResource,
		NewSecuremeshSiteResource,
		NewSecuremeshSiteV2Resource,
		NewSegmentResource,
		NewSensitiveDataPolicyResource,
		NewServicePolicyResource,
		NewServicePolicyRuleResource,
		NewSiteMeshGroupResource,
		NewSrv6NetworkSliceResource,
		NewSubnetResource,
		NewTCPLoadBalancerResource,
		NewTenantConfigurationResource,
		NewTenantProfileResource,
		NewTicketTrackingSystemResource,
		NewTokenResource,
		NewTpmAPIKeyResource,
		NewTpmCategoryResource,
		NewTpmManagerResource,
		NewTrustedCaListResource,
		NewTunnelResource,
		NewUDPLoadBalancerResource,
		NewUsbPolicyResource,
		NewUserIdentificationResource,
		NewVirtualHostResource,
		NewVirtualK8SResource,
		NewVirtualNetworkResource,
		NewVirtualSiteResource,
		NewVoltshareAdminPolicyResource,
		NewVoltstackSiteResource,
		NewWAFExclusionPolicyResource,
		NewWorkloadFlavorResource,
		NewWorkloadResource,
	}
}

func (p *F5XCProvider) DataSources(ctx context.Context) []func() datasource.DataSource {
	return []func() datasource.DataSource{
		NewAPICrawlerDataSource,
		NewAPICredentialDataSource,
		NewAPIDefinitionDataSource,
		NewAPIDiscoveryDataSource,
		NewAPITestingDataSource,
		NewAPMDataSource,
		NewAWSTGWSiteDataSource,
		NewAWSVPCSiteDataSource,
		NewAddonSubscriptionDataSource,
		NewAddressAllocatorDataSource,
		NewAdvertisePolicyDataSource,
		NewAlertPolicyDataSource,
		NewAlertReceiverDataSource,
		NewAllowedTenantDataSource,
		NewAppAPIGroupDataSource,
		NewAppFirewallDataSource,
		NewAppSettingDataSource,
		NewAppTypeDataSource,
		NewAuthenticationDataSource,
		NewAzureVNETSiteDataSource,
		NewBGPAsnSetDataSource,
		NewBGPDataSource,
		NewBGPRoutingPolicyDataSource,
		NewBigIPIruleDataSource,
		NewBotDefenseAppInfrastructureDataSource,
		NewCDNCacheRuleDataSource,
		NewCDNLoadBalancerDataSource,
		NewCRLDataSource,
		NewCertificateChainDataSource,
		NewCertificateDataSource,
		NewChildTenantDataSource,
		NewChildTenantManagerDataSource,
		NewCloudConnectDataSource,
		NewCloudCredentialsDataSource,
		NewCloudElasticIPDataSource,
		NewCloudLinkDataSource,
		NewClusterDataSource,
		NewCminstanceDataSource,
		NewCodeBaseIntegrationDataSource,
		NewContactDataSource,
		NewContainerRegistryDataSource,
		NewCustomerSupportDataSource,
		NewDNSComplianceChecksDataSource,
		NewDNSDomainDataSource,
		NewDNSLbHealthCheckDataSource,
		NewDNSLbPoolDataSource,
		NewDNSLoadBalancerDataSource,
		NewDNSZoneDataSource,
		NewDataGroupDataSource,
		NewDataTypeDataSource,
		NewDcClusterGroupDataSource,
		NewDiscoveryDataSource,
		NewEndpointDataSource,
		NewEnhancedFirewallPolicyDataSource,
		NewExternalConnectorDataSource,
		NewFastACLDataSource,
		NewFastACLRuleDataSource,
		NewFilterSetDataSource,
		NewFleetDataSource,
		NewForwardProxyPolicyDataSource,
		NewForwardingClassDataSource,
		NewGCPVPCSiteDataSource,
		NewGeoLocationSetDataSource,
		NewGlobalLogReceiverDataSource,
		NewHTTPLoadBalancerDataSource,
		NewHealthcheckDataSource,
		NewIKEPhase1ProfileDataSource,
		NewIKEPhase2ProfileDataSource,
		NewIPPrefixSetDataSource,
		NewIke1DataSource,
		NewIke2DataSource,
		NewInfraprotectAsnDataSource,
		NewInfraprotectAsnPrefixDataSource,
		NewInfraprotectDenyListRuleDataSource,
		NewInfraprotectFirewallRuleDataSource,
		NewInfraprotectFirewallRuleGroupDataSource,
		NewInfraprotectInternetPrefixAdvertisementDataSource,
		NewInfraprotectTunnelDataSource,
		NewIruleDataSource,
		NewK8SClusterDataSource,
		NewK8SClusterRoleBindingDataSource,
		NewK8SClusterRoleDataSource,
		NewK8SPodSecurityAdmissionDataSource,
		NewK8SPodSecurityPolicyDataSource,
		NewLogReceiverDataSource,
		NewMaliciousUserMitigationDataSource,
		NewManagedTenantDataSource,
		NewNFVServiceDataSource,
		NewNamespaceDataSource,
		NewNatPolicyDataSource,
		NewNetworkConnectorDataSource,
		NewNetworkFirewallDataSource,
		NewNetworkInterfaceDataSource,
		NewNetworkPolicyDataSource,
		NewNetworkPolicyRuleDataSource,
		NewNetworkPolicyViewDataSource,
		NewOidcProviderDataSource,
		NewOriginPoolDataSource,
		NewPolicerDataSource,
		NewPolicyBasedRoutingDataSource,
		NewProtocolInspectionDataSource,
		NewProtocolPolicerDataSource,
		NewProxyDataSource,
		NewQuotaDataSource,
		NewRateLimiterDataSource,
		NewRateLimiterPolicyDataSource,
		NewRegistrationDataSource,
		NewReportConfigDataSource,
		NewRoleDataSource,
		NewRouteDataSource,
		NewSecretManagementAccessDataSource,
		NewSecretPolicyDataSource,
		NewSecretPolicyRuleDataSource,
		NewSecuremeshSiteDataSource,
		NewSecuremeshSiteV2DataSource,
		NewSegmentDataSource,
		NewSensitiveDataPolicyDataSource,
		NewServicePolicyDataSource,
		NewServicePolicyRuleDataSource,
		NewSiteMeshGroupDataSource,
		NewSrv6NetworkSliceDataSource,
		NewSubnetDataSource,
		NewTCPLoadBalancerDataSource,
		NewTenantConfigurationDataSource,
		NewTenantProfileDataSource,
		NewTicketTrackingSystemDataSource,
		NewTokenDataSource,
		NewTpmAPIKeyDataSource,
		NewTpmCategoryDataSource,
		NewTpmManagerDataSource,
		NewTrustedCaListDataSource,
		NewTunnelDataSource,
		NewUDPLoadBalancerDataSource,
		NewUsbPolicyDataSource,
		NewUserIdentificationDataSource,
		NewVirtualHostDataSource,
		NewVirtualK8SDataSource,
		NewVirtualNetworkDataSource,
		NewVirtualSiteDataSource,
		NewVoltshareAdminPolicyDataSource,
		NewVoltstackSiteDataSource,
		NewWAFExclusionPolicyDataSource,
		NewWorkloadDataSource,
		NewWorkloadFlavorDataSource,
	}
}

func New(version string) func() provider.Provider {
	return func() provider.Provider {
		return &F5XCProvider{
			version: version,
		}
	}
}
